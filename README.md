# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"


###### 1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

***OS Windows***
```
C:\Users\Alex>ipconfig

Настройка протокола IP для Windows


Адаптер Ethernet VirtualBox Host-Only Network:

   DNS-суффикс подключения . . . . . :
   Локальный IPv6-адрес канала . . . : fe80::b061:2bd6:8c64:5212%9
   IPv4-адрес. . . . . . . . . . . . : 192.168.56.1
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . :

Адаптер беспроводной локальной сети Беспроводная сеть:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . : Home

Адаптер беспроводной локальной сети Подключение по локальной сети* 1:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер беспроводной локальной сети Подключение по локальной сети* 2:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet:

   DNS-суффикс подключения . . . . . :
   IPv4-адрес. . . . . . . . . . . . : 192.168.88.250
   Маска подсети . . . . . . . . . . : 255.255.255.0
   Основной шлюз. . . . . . . . . : 192.168.88.1

Адаптер Ethernet Ethernet 2:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :

Адаптер Ethernet Ethernet 3:

   Состояние среды. . . . . . . . : Среда передачи недоступна.
   DNS-суффикс подключения . . . . . :
```

***Linux***

```
vagrant@vagrant:~$ ip link
1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
    link/ether 08:00:27:b1:28:5d brd ff:ff:ff:ff:ff:ff
```

###### 2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?

***Используется протокол lldp. Так же можно посмотреть записи о соседях в таблице `ARP` вида `arp-a` или `ip neighbor`. Для ipv6 соседей можно использовать `ndptool`***  


`root@alex-virtual-machine:~# lldpctl`
```
-------------------------------------------------------------------------------

LLDP neighbors:

-------------------------------------------------------------------------------

Interface: ens160, via: LLDP, RID: 1, Time: 0 day, 00:00:56

Chassis:

ChassisID: mac cc:2d:e0:f2:3b:3a

SysName: MikroTik

SysDescr: MikroTik RouterOS 6.46 (stable) RB952Ui-5ac2nD

MgmtIP: 192.168.88.1

Capability: Bridge, on

Capability: Router, on

Port:

PortID: ifname bridge/ether2

TTL: 120

-------------------------------------------------------------------------------
```


 
##### 3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.

***Используется технология `vlan`***  
***`apt-get install vlan` установит пакет `vlan`. Командой `vconfig` прописываются виланы, либо руками в `/etc/network/intetfaces`***  
```
auto vlan1400
iface vlan1400 inet static
        address 192.168.1.1
        netmask 255.255.255.0
        vlan_raw_device eth0
```



##### 4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

`Mode-0(balance-rr)` – ***Данный режим используется по умолчанию. Обеспечивает балансировку нагрузки и отказоустойчивость.***  
`Mode-1(active-backup)` – ***Один из интерфейсов работает в активном режиме, остальные в ожидающем.***  
`Mode-2(balance-xor)` – ***Передача пакетов распределяется по типу входящего и исходящего трафика по формуле `((MAC src) XOR (MAC dest)) %` число интерфейсов.***  
`Mode-3(broadcast)` – ***Происходит передача во все объединенные интерфейсы.***  
`Mode-4(802.3ad)` – ***динамическое объединение одинаковых портов.***  
`Mode-5(balance-tlb)` – ***Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса.***  
`Mode-6(balance-alb)` – ***Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика.***

***Пример конфига балансировки с опциями `/etc/network/intetfaces`***
```
auto bond0 eth0 eth1
# настройка параметров 
iface bond0 inet static
# адрес, маска, шлюз.
        address 10.0.0.11
        netmask 255.255.255.0
        gateway 10.0.0.254
        # определяем подчиненные (объединяемые) интерфейсы
        bond-slaves eth0 eth1
        # задаем тип бондинга
        bond-mode balance-alb
        # интервал проверки линии в миллисекундах
        bond-miimon 100
        # задержка перед установкой соединения в миллисекундах
        bond-downdelay 200
        # задержка перед обрывом соединения в миллисекундах
        bond-updelay 200
```

##### 5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

***Маска `/29` подразумевает 8 адресов. В сети `/24` можно разместить 32 сети `/29`***  

`10.10.10.0/24`  
***10.10.10.128/29***  
***10.10.10.136/29***  
***10.10.10.144/29***  
***10.10.10.152/29***

##### 6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.

***Остались сети `100.64.0.0 — 100.127.255.255`***  
***Условно можно выделить подсеть `100.64.100.100/27` с 30 хостами***

##### 7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

***Linux***  
`ip n` - ***просмотр ARP таблицы***  
`ip neigh flush` - ***очистка ARP таблицы***  
`ip neigh del dev {interface} {ip address}` - ***удаление конкретного адреса из ARP таблицы интерфейса***  

***Windows***  
`arp -a` - ***просмотр ARP таблицы***  
`arp -d *` - ***очистка ARP таблицы***  
`arp -d {inet_addr}` - ***удаление конкретного адреса из ARP таблицы***

